<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LazyLoad</title>
</head>

<body>
    <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Optio, ratione nemo deserunt facere est aperiam ea, porro ullam voluptatum accusantium modi eius ad blanditiis tempora harum animi pariatur atque debitis tenetur ipsum repellendus suscipit,
        quo eveniet. Corrupti consectetur exercitationem minus nihil consequuntur aliquid aspernatur pariatur! Cupiditate vel aliquam nam totam consectetur ipsa perferendis, enim dicta eveniet molestias deleniti voluptatibus! Expedita aspernatur odio
        veritatis natus harum eius fugit! Sed, aliquid deleniti consequuntur eius minus explicabo earum omnis iste! Veritatis deserunt amet animi voluptas inventore aperiam quos illum? Quam possimus non quidem nam inventore ratione perferendis ipsum blanditiis
        nisi quia temporibus vel hic natus aut reiciendis vitae aliquid consequatur, eum illum! Cupiditate obcaecati reprehenderit veritatis veniam sequi ipsa. Obcaecati ad, mollitia ipsam consectetur impedit quis voluptatibus doloremque ipsum ducimus
        illo enim qui numquam repellat tempora blanditiis quo! Minima facilis quasi nisi ut incidunt, tempore accusamus reprehenderit deserunt, qui ipsum esse. Molestiae, consequuntur dignissimos eligendi corrupti dolores laboriosam facere. Possimus voluptatem
        tenetur sit eligendi voluptates, dolor quidem iste, minima rem inventore esse iusto. Quisquam consequatur fugiat qui, in praesentium doloremque earum expedita tempore explicabo atque incidunt dolores ullam officia facilis ipsum obcaecati. Non
        vero eos itaque repudiandae eaque alias amet facilis iste architecto! Reiciendis aliquid explicabo temporibus facere. Dolores ipsam numquam delectus recusandae corporis reprehenderit blanditiis beatae, dignissimos neque? Nesciunt magnam odio officiis
        doloremque delectus aut repellat ipsa nihil recusandae quae earum esse quasi ab vero, ratione sequi rem repellendus saepe blanditiis accusantium eius iste nisi culpa! Placeat unde ab quam adipisci ipsam hic ullam doloremque officia facilis quaerat.
        Repellat ipsam impedit quod cum obcaecati recusandae perspiciatis nemo officia nihil id soluta aperiam tempore sed et maxime possimus optio sequi, eos, alias natus veniam ipsum voluptatum. Eum, iure! Iusto unde repellendus necessitatibus eos eveniet
        et impedit aperiam blanditiis perferendis dicta magni vitae, quos sunt libero vel, eius, temporibus illo maxime deserunt a quia nesciunt asperiores! Eveniet aperiam in consectetur recusandae, tenetur nam explicabo, earum numquam illo quas, ipsum
        a? Obcaecati beatae veritatis inventore minima pariatur quasi quos, ea ab cupiditate sit aliquid eius in porro vitae quod rerum id natus voluptate laudantium, sequi nobis. Accusantium amet asperiores aliquid sapiente nostrum temporibus culpa molestias
        atque, quasi blanditiis. Eaque illo cum iste quae maxime distinctio deserunt aliquam, in optio eligendi quaerat sit pariatur maiores vel, vitae sed exercitationem voluptas adipisci sequi aspernatur praesentium ut aperiam. Pariatur quae quisquam
        recusandae dolor eligendi. Nisi ea explicabo saepe! Lorem ipsum, dolor sit amet consectetur adipisicing elit. Obcaecati, ipsa. Quia possimus id similique sint dignissimos libero magnam dicta maxime! Molestias fugit, ullam esse inventore necessitatibus
        molestiae, quibusdam vitae corporis alias animi ipsam at adipisci? Cum dolores quia eveniet nihil enim natus ad neque nesciunt mollitia amet sunt facilis eos officia ea, asperiores eum tenetur rerum, reiciendis maiores saepe. Placeat pariatur
        fugit consectetur perferendis eius aspernatur, laboriosam sequi labore tempore aut corrupti soluta saepe tempora repellat vero deserunt nemo eum animi tenetur aperiam temporibus laborum repudiandae quod neque? Nesciunt, sequi. Natus dicta accusamus
        fugit a, praesentium eaque odit, maxime quasi reprehenderit tempore vero ex labore nesciunt voluptas provident repellendus modi? Corrupti doloremque recusandae animi, aliquam, similique at id, quo a sapiente cumque nostrum enim dicta repellat.
        Minus magnam modi consectetur? Quaerat deleniti veritatis dicta vitae beatae, accusantium molestiae perferendis tempore est repellendus dolorem fuga at sed sunt quo cupiditate corrupti molestias eveniet aliquam non nemo! Aspernatur dolorem accusamus
        ratione necessitatibus! In aut repellat, sequi eaque adipisci architecto necessitatibus veniam corporis, modi, quas at hic. Voluptas adipisci alias error, vero quos modi labore praesentium ipsa dicta id? Dicta necessitatibus debitis omnis aliquid,
        quod incidunt fuga iure. In at hic magnam, labore doloremque quo quia animi ea odio, illo voluptate ipsa accusamus velit similique dolore sit, impedit saepe? Numquam atque dignissimos fugiat eveniet rerum, porro ea rem qui id consequuntur impedit
        tempora obcaecati eaque suscipit culpa explicabo facilis quidem quas voluptatibus assumenda deleniti soluta minus minima. Ex, soluta. Autem inventore, magnam id officia excepturi porro laborum obcaecati earum tempore voluptas nam corrupti nulla
        aliquid voluptatem veritatis totam, dicta suscipit quidem, provident illum ad ea dolores pariatur? At adipisci inventore autem, rerum maiores necessitatibus et aliquid natus amet ad ullam sint officia sit sapiente repudiandae corrupti magnam quos
        esse veniam unde quis harum ipsa eveniet ipsam. Assumenda quo architecto quibusdam soluta, non eius reprehenderit, odit iusto numquam totam illum. Illo molestias nam labore recusandae fugiat earum soluta provident tempore dicta similique et aut
        quae repudiandae, eligendi odit consequatur consectetur aspernatur dolores quis quam. Facere, tempore exercitationem. Aperiam pariatur quas deserunt iste? Quisquam culpa sit consequuntur. Expedita, illum dolorem minima est quae voluptatum labore,
        doloribus ipsam, nam aperiam assumenda qui. Temporibus, incidunt, veniam et perferendis aspernatur autem at tenetur labore adipisci ipsa consequuntur numquam quibusdam illum commodi iure doloremque sed harum, architecto saepe est alias ipsum?
        Quae enim et ad deleniti, consectetur architecto nobis. Lorem ipsum dolor sit amet consectetur, adipisicing elit. Maiores quos, assumenda, velit quidem eligendi deserunt odio ad molestiae expedita rem culpa vero aliquid repellat pariatur dignissimos
        provident! Blanditiis voluptatum similique quasi ex, optio molestias ut alias vero in deserunt quibusdam debitis architecto dolores eaque ab minus vel esse eum distinctio iste eveniet ullam tenetur a odit. Quaerat animi possimus fugit quasi ex
        neque exercitationem? Unde id tempore perspiciatis magni. Cupiditate qui nobis temporibus vitae expedita quam. Qui saepe nesciunt at ducimus quisquam ad voluptatum? Perspiciatis iste harum ipsum, adipisci excepturi iusto velit ipsa pariatur? Nam,
        velit nisi dolores provident fuga rem quibusdam reprehenderit ullam impedit nihil illo quae aliquid! Quos nostrum repellat ab. Repellat tempora iste fugiat unde dolorum corrupti minima ipsum maxime, voluptates voluptate? Eum ut sapiente doloribus
        perspiciatis? Ipsum veniam voluptatum, facilis fugiat mollitia id sed deserunt libero, labore tenetur nam quaerat at? Doloribus quasi accusamus, quaerat, deserunt eligendi aperiam deleniti obcaecati sint optio molestias aliquam nihil quae! Omnis
        recusandae debitis sapiente quisquam quibusdam similique ducimus, praesentium ullam optio aliquam ex voluptates alias aliquid excepturi consequatur placeat ipsam? Nesciunt, possimus labore aspernatur quibusdam molestiae, rerum enim deserunt fugiat
        nemo ut quasi quo maiores quisquam suscipit itaque laboriosam corporis! Harum voluptas iure cum accusantium nobis eius placeat fugiat corrupti id, totam beatae unde odio sequi obcaecati ullam provident quisquam maxime, quas mollitia veniam commodi
        natus accusamus labore reprehenderit. Consequatur non repudiandae dicta nisi deleniti soluta tenetur dignissimos vitae. Mollitia minus dolor nihil exercitationem. Sunt fugiat quia atque suscipit. Natus corrupti placeat cum debitis itaque harum
        aut laboriosam repellendus temporibus tenetur enim, ratione obcaecati assumenda illum magnam pariatur consequuntur dignissimos earum adipisci ipsum! Illum corporis esse totam. Delectus pariatur perferendis fugit odio laborum temporibus repellat
        aperiam ipsam recusandae. Aperiam, ipsum? Veritatis esse cupiditate repellendus sint obcaecati recusandae totam distinctio enim.</p>
    <img shallow-src="./2.png" alt="">
    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Magnam totam libero voluptate esse sapiente. Modi, at cumque sequi consequuntur, veniam labore ea accusamus sunt doloribus laudantium deserunt obcaecati? Ipsum, libero atque doloribus quia blanditiis
        at sint totam fugiat minima quam cum officiis nulla quaerat, placeat amet alias ab, aut exercitationem maxime. Quisquam et voluptatum error ut maxime adipisci dolores, qui, doloribus minima minus accusamus officiis soluta veritatis quas possimus
        rerum enim sunt! Quam, quod ducimus in molestias at consectetur iusto officia. Rem id accusantium consequatur, veniam non accusamus at suscipit, aliquid, magni eos aut voluptatem ducimus maiores nam nulla! Eveniet distinctio doloremque qui minus
        id aut possimus tempora laboriosam ea maiores, voluptatibus suscipit. Recusandae ipsum nesciunt ut aut minima iusto eum accusamus tempora, consequatur velit error sapiente sequi qui dolorem minus. Porro, eos itaque quia qui voluptatum, at ipsam
        unde ducimus cumque eum quae dolor ipsum quibusdam aliquam. Quod numquam culpa modi fugiat qui laborum debitis doloremque voluptate placeat nihil perspiciatis eos explicabo reprehenderit illum perferendis consequatur dolor, accusamus molestias
        maiores. Dignissimos eligendi iste sit error quo nulla praesentium nam sequi corrupti quis expedita, facere incidunt veniam ab vero consequuntur deserunt, sed rerum soluta aperiam eius quibusdam dicta. Molestiae, maxime.</p>
    <img shallow-src="./5.png" alt="">
    <script>
        const isVisible = (element) => {
            let topElement = element.getBoundingClientRect().top;
            console.log(topElement);
            let downOffset = window.innerHeight;
            console.log(downOffset);
            if (topElement < downOffset) {
                return true;
            }
        }
        const scrollHandler = () => {
            for (let img of document.querySelectorAll('img')) {
                let real_src = img.getAttribute('shallow-src');
                if (real_src) {
                    if (isVisible(img)) {
                        img.src = real_src;
                        img.removeAttribute('shallow-src');
                        real_src = null;
                    }
                }
            }
        }

        scrollHandler()
        console.log(document.getElementsByTagName('img').pageYOffset);
        document.addEventListener('scroll', scrollHandler);
    </script>
</body>

</html>